api_version: darwinium.com/api/snippet/v1
snippets:
  - name: jira_create_issue
    display_name: "Create JIRA Issue"
    scope: model/operation
    icon: 
      type: svg+xml
      href: PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIGJ5IE1hcnN1cGlsYW1pIC0tPgo8c3ZnCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgdmVyc2lvbj0iMS4xIgogICBpZD0ic3ZnODA5MyIKICAgd2lkdGg9IjEwMjQiCiAgIGhlaWdodD0iMTQwIgogICB2aWV3Qm94PSItMy41Njc3ODkgLTMuNTY3Nzg5IDkyMy4zNjQ5NDggMTI2LjA2MTg3OCI+CiAgPGRlZnMKICAgICBpZD0iZGVmczgwOTUiPgogICAgPGxpbmVhckdyYWRpZW50CiAgICAgICBpZD0ibGluZWFyR3JhZGllbnQ4MDE5IgogICAgICAgc3ByZWFkTWV0aG9kPSJwYWQiCiAgICAgICBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KDEuNTY5NzgxMiwwLDAsMS41Njk3ODEyLC0wLjAwNTA1LC0wLjAwMjEpIgogICAgICAgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiCiAgICAgICB5Mj0iNDQuNjcxODc1IgogICAgICAgeDI9IjU0LjM5MDYyNSIKICAgICAgIHkxPSI1Ny40NzE1NjEiCiAgICAgICB4MT0iNDEuNTkwOTM5Ij4KICAgICAgPHN0b3AKICAgICAgICAgaWQ9InN0b3A4MDIxIgogICAgICAgICBvZmZzZXQ9IjAiCiAgICAgICAgIHN0eWxlPSJzdG9wLW9wYWNpdHk6MTtzdG9wLWNvbG9yOiMwMDUyY2MiIC8+CiAgICAgIDxzdG9wCiAgICAgICAgIGlkPSJzdG9wODAyMyIKICAgICAgICAgb2Zmc2V0PSIxIgogICAgICAgICBzdHlsZT0ic3RvcC1vcGFjaXR5OjE7c3RvcC1jb2xvcjojMjY4NGZmIiAvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudAogICAgICAgaWQ9ImxpbmVhckdyYWRpZW50ODAwOSIKICAgICAgIHNwcmVhZE1ldGhvZD0icGFkIgogICAgICAgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgxLjU2OTc4MTIsMCwwLDEuNTY5NzgxMiwtMC4wMDUwNSwtMC4wMDIxKSIKICAgICAgIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIgogICAgICAgeTI9IjMwLjk4ODI4MSIKICAgICAgIHgyPSIxOSIKICAgICAgIHkxPSIxOC4xNjYxNzIiCiAgICAgICB4MT0iMzEuODI1MzEyIj4KICAgICAgPHN0b3AKICAgICAgICAgaWQ9InN0b3A4MDExIgogICAgICAgICBvZmZzZXQ9IjAiCiAgICAgICAgIHN0eWxlPSJzdG9wLW9wYWNpdHk6MTtzdG9wLWNvbG9yOiMwMDUyY2MiIC8+CiAgICAgIDxzdG9wCiAgICAgICAgIGlkPSJzdG9wODAxMyIKICAgICAgICAgb2Zmc2V0PSIxIgogICAgICAgICBzdHlsZT0ic3RvcC1vcGFjaXR5OjE7c3RvcC1jb2xvcjojMjY4NGZmIiAvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICA8L2RlZnM+CiAgPHBhdGgKICAgICBpZD0icGF0aDc5ODEiCiAgICAgZD0ibSA1NTIuNzY0NTUsNi42OTk1IGMgLTE0Ljc5LDAgLTIxLjk3ODUsOC43MTUzIC0yMS45Nzg1LDIxLjU1MjggbCAwLDcuNTM5IC0xMS4xOTE1LDAgMCwxMC45ODY0IDExLjIzNjQsMCAwLDU4LjA4MiAxMS41OTk2LDAgMCwtNTguMDgyIDE3LjgxODMsMCAwLC0xMC45ODY0IC0xNy44MTgzLDAgLTAuMTA3NCwtNy4xOTMzIGMgMCwtNi4yMTUgMy42NzI1LC0xMC41MDIgMTAuOTg2MywtMTAuNTAyIDIuNTA1LC0wLjAxIDUuMDAwOCwwLjIyNTkgNy40NTcsMC42OTM0IGwgMCwtMTAuOTkwMyBjIC0yLjYwMjUsLTAuNzQyNSAtNS4yOTY5LC0xLjExNDYgLTguMDAxOSwtMS4wOTk2IHogTSAyMDUuNzg3OTUsOS4yNjIgYyAtMS45NDgxLDAuMDcxIC0zLjgwOTMsMC44NzQyIC01LjE5NzMsMi4yNjc2IC0xLjU5MjUsMS41ODYzIC0yLjQxMjEsMy43OTIgLTIuMjU1OCw2LjAzMzIgMCwyLjk2MzggMS41NzcsNS43MDQ5IDQuMTQ0NSw3LjE4MzYgMi41NjM4LDEuNDg1IDUuNzI3MywxLjQ4NSA4LjI5MSwwIDIuNTYzOCwtMS40Nzg3IDQuMTQ3NiwtNC4yMTk4IDQuMTQyNiwtNy4xODM2IDAuMTYsLTIuMjQxMiAtMC42NjA3LC00LjQ0NjkgLTIuMjUxOSwtNi4wMzMyIC0xLjU4NzUsLTEuNTkyNSAtMy43OTQsLTIuNDEzMiAtNi4wMzUyLC0yLjI1MTkgLTAuMjgwOCwtMC4wMiAtMC41NTk2LC0wLjAyNiAtMC44Mzc5LC0wLjAxNiB6IG0gMTk4LjEyODksMy40Njg4IGMgLTIxLjE0NzUsMCAtMzEuOTE2LDEwLjQ1MzggLTMxLjkxNiwyNC41ODAxIDAsMTQuOTE2MiA5LjE1MjUsMjEuOTYxMiAyOS41NjI1LDI2LjkzNzUgMTcuMjY1LDQuMTQ1IDIyLjI0MDIsOC40MTMgMjIuMjQwMiwxNi40MzU1IDAsOC4wMjI1IC01LjE2NjYsMTMuNDA4MiAtMTguODM3OSwxMy40MDgyIC0xMi4wMDc1LDAgLTI0Ljk5MDQsLTMuMTczOSAtMzMuNDE3OSwtNy41OTc2IGwgMCwxMi43MDExIGMgNy4wNDYyLDMuNTkzOCAxNS4xOTQxLDcuMDQ1IDMyLjc0NDEsNy4wNDUgMjIuNTIzOCwwIDMxLjkxNTMsLTEwLjY0NDMgMzIuMDA3OCwtMjYuMzg2OCAwLC0xNi4zNTc1IC0xMC43ODE3LC0yMi41MTA4IC0yOS45ODA0LC0yNy4zNDk2IC0xNi4wMTEzLC0zLjk5ODcgLTIxLjgyMjMsLTcuNzM3MSAtMjEuODIyMywtMTUuMTkzMyAwLC04LjI4NjMgNy4wNDk3LC0xMi40MzE3IDE4LjkyOTcsLTEyLjQzMTcgOS44NjM3LC0wLjI0IDE5LjYxNTMsMi4xNDIgMjguMjU3OCw2LjkwODIgbCAwLC0xMi40MzU1IGMgLTYuMjE2MywtMy40ODEzIC0xNC42NDI2LC02LjYyMTEgLTI3Ljc2NzYsLTYuNjIxMSB6IG0gLTIzMi4zNzUsMS4zOTQ1IDAuMDMxLDYzLjkzNTYgYyAwLDkuMDU4NyAtMy42Mjk0LDE1LjMzNzkgLTE0LjEyNjksMTUuMzM3OSAtNC4zOTUsMC4wMzQgLTguNzUwNiwtMC43NjYxIC0xMi44NDE4LC0yLjM1MzYgbCAwLDEyLjA4NCBjIDQuNzk4NywxLjYzNjMgOS44NDMzLDIuNDMxOSAxNC45MTIxLDIuMzU5NCAxNy4xNDM3LDAgMjQuNDU5LC0xMS41MzkxIDI0LjQ1OSwtMjguMjU3OCBsIDAsLTYzLjEwNTUgLTEyLjQzMzYsMCB6IG0gNDA2LjMzOTksNy4wMTc2IDAsMTQuNzA3IC0xMS4xOTczLDAgMCwxMC45OTIyIDExLjI0MDIsMCAwLDM2LjQ0OTIgYyAwLDEyLjg1NjMgNy4xOTM1LDIxLjU1MjggMjEuOTc4NSwyMS41NTI4IDIuNzEsMC4wMTUgNS40MDM0LC0wLjM1NzEgOC4wMDU5LC0xLjA5OTYgbCAwLC0xMS40NTkgYyAtMi40NDYzLDAuNTcxMiAtNC45NDUxLDAuODk4OSAtNy40NTUxLDAuOTcyNiAtNy4zMTg3LDAgLTEwLjkxMjgsLTQuMTQxOSAtMTAuOTc2NSwtMTAuMjIwNyBsIDAsLTM2LjI1OTcgMTguMzY5MSwwIDAsLTEwLjk4NjQgLTE4LjM2OTEsMCAwLC0xNC42NDg0IC0xMS41OTU3LDAgeiBtIDMwOC41MTk1LDEzLjIxODcgYyAtMjEuMDAxMywwIC0zMi42MDE2LDE0LjkxMDQgLTMyLjYwMTYsMzUuNzc1NCAwLDIxLjE5MTMgMTEuMzE4MiwzNi4xMDM2IDM3LjE1ODIsMzYuMTAzNiA3LjA0NSwwIDE1Ljc2MDEsLTEuMDY4OCAyMS40MjM5LC00LjEyNSBsIDAsLTEwLjk5MjIgYyAtNi43Mjg4LDIuNDY1IC0xMy44MzYzLDMuNzMxMyAtMjEsMy43MzYzIC0xNi4yOTg4LDAgLTIzLjg5NjcsLTcuNTk4MSAtMjUuNTU2NywtMTkuMzQxOCBsIDUwLjQwNDMsMCAwLC01LjM4MDkgYyAwLC0yMC45OTEyIC04LjU1MzEsLTM1Ljc3NTQgLTI5LjgyODEsLTM1Ljc3NTQgeiBtIC01ODYuMjY1NiwwLjA0OSBjIC0xOS4zNCwwIC0yOS4wMDc5LDE2LjQzNDcgLTI5LjAwNzksMzUuOTEyMiAwLDIwLjMxMjUgOS4yNjIsMzUuOTE3OSAyNy42MjcsMzUuOTE3OSAxMC42MywwIDE4LjkxNywtNC42OTEyIDIzLjM0NTcsLTEzLjgxMjUgbCAwLjAxNCwxMi40MzE3IDExLjg4NDgsMCAwLC02OS4wNjg0IC0xMS44ODQ4LDAgMCwxMi4xNDg0IGMgLTQuMTYsLTguOTggLTExLjg5OTgsLTEzLjUyOTMgLTIxLjk3ODUsLTEzLjUyOTMgeiBtIDE3OS40NDUzLDAgYyAtMjAuNzIyNSwwIC0zMi44NzMxLDE1LjA1NCAtMzIuODczMSwzNS43NzE1IDAsMjAuNzIyNSAxMi4yOTE4LDM2LjEwNzQgMzIuODczMSwzNi4xMDc0IDIwLjU4MTIsMCAzMi42MDE1LC0xNS4zODQ5IDMyLjYwMTUsLTM2LjEwNzQgMCwtMjAuNzE3NSAtMTEuODg0LC0zNS43NzE1IC0zMi42MDE1LC0zNS43NzE1IHogbSAyODEuNjY0LDAgYyAtMTkuMzQxMiwwIC0yOS4wMDc4LDE2LjQzNDcgLTI5LjAwNzgsMzUuOTEyMiAwLDIwLjMxMjUgOS4yNjIsMzUuOTE3OSAyNy42MjcsMzUuOTE3OSAxMC42Mjg3LDAgMTguOTE1LC00LjY5MTIgMjMuMzQzNywtMTMuODEyNSBsIDAuMDE0LDEyLjQzMTcgMTEuODg2NywwIDAsLTY5LjA2ODQgLTExLjg4NjcsMCAwLDEyLjE0ODQgYyAtNC4xNiwtOC45OCAtMTEuODk5LC0xMy41MjkzIC0yMS45NzY1LC0xMy41MjkzIHogbSAtNDk3LjI1OTcsMC4zMjYyIGMgLTExLjg4MTgsLTAuMDE2IC0xOC4yNTQzLDUuNTYyNSAtMjIuMDA3OCwxMy4yMDMxIGwgMCwtMTIuMTQ4NCAtMTEuNjAxNiwwIDAsNjkuMTE1MiAxMS42MDE2LDAgMCwtNDAuODE0NCBjIDAsLTE0LjYyODggOS4yNjIsLTE5LjI0MzMgMjQuNDU3LC0xNy42NzU4IGwgMCwtMTEuNjAxNiBjIC0wLjg0MiwtMC4wNTIgLTEuNjU3MSwtMC4wNzcgLTIuNDQ5MiwtMC4wNzggeiBtIDU4Mi42Njk5LDAgYyAtMTEuODgxOCwtMC4wMTYgLTE4LjI1MjQsNS41NjI1IC0yMi4wMDU5LDEzLjIwMzEgbCAwLC0xMi4xNDg0IC0xMS42MDM1LDAgMCw2OS4xMTUyIDExLjYwMzUsMCAwLC00MC44MTQ0IGMgMCwtMTQuNjI4OCA5LjI2MjEsLTE5LjI0MzMgMjQuNDU3MSwtMTcuNjc1OCBsIDAsLTExLjYwMTYgYyAtMC44NDIsLTAuMDUyIC0xLjY1OTEsLTAuMDc3IC0yLjQ1MTIsLTAuMDc4IHogbSAtMjM1LjQxOTksMS4wNTQ3IDI1LjQxNCw2OS4wNjg0IDE1LjE5NTMsMCAxMi4wNDExLC0zMy40MTggNi4yODEyLC0yMS4yNzU0IDYuMjc3NCwyMS4yNzU0IDExLjg4NjcsMzMuNDE4IDE1LjE5MzMsMCAyNS40MTYsLTY5LjA2ODQgLTEzLjEyNSwwIC0xOS45MDgyLDU4LjU2NDUgLTIwLjE2OTksLTU4LjU2NDUgLTExLjMzNCwwIC0yMC4xNTYyLDU4LjU2NDUgLTE5Ljg4NjcsLTU4LjU2NDUgLTEzLjEyNSwwIHogbSAtNDEwLjY4MzYsMC4wMTYgMCw2OS4wNjY0IDExLjg3ODksMCAwLC02OS4wNjY0IC0xMS44Nzg5LDAgeiBtIDY4NS4yNjc2LDkuNDQ3MyBjIDExLjg3LDAgMTcuNjc2Niw3LjMyODYgMTguMzY5MSwyMC4xNjk5IGwgLTM4LjUwMzksMCAwLC0wLjA3NiBjIDEuMjQsLTExLjk3NzUgNy41OTYsLTIwLjE1NjMgMjAuMTM0OCwtMjAuMDkzOCB6IG0gLTU4Mi41NTg2LDAuMTQyNiBjIDEwLjE0MjUsMCAxOC44Mzk4LDYuNzY3MiAxOC44Mzk4LDIyLjEwMzUgbCAwLDUuNTg1OSBjIDAsMTUuMzMgLTkuNTIyNiwyMi4wOTg4IC0yMC4xNTYyLDIyLjEwNTUgLTEyLjMxLDAgLTE4LjkzMjQsLTguMjkyNCAtMTguOTk2MSwtMjQuOTMzNiAwLC0xNi4wMjUgNi45MDUsLTI0Ljg2MTMgMjAuMzEyNSwtMjQuODYxMyB6IG0gNDYxLjEwOTMsMCBjIDEwLjE0MTMsMCAxOC44Mzc5LDYuNzY3MiAxOC44Mzc5LDIyLjEwMzUgbCAwLDUuNTg1OSBjIDAsMTUuMzI4MSAtOS41MjA0LDIyLjA5NzEgLTIwLjE1NjIsMjIuMTA1NSAtMTIuMzA4OCwwIC0xOC45Nzg1LC04LjI5MTcgLTE4Ljk3ODUsLTI0Ljg2OTIgMCwtMTYuMDI1IDYuOTUxOCwtMjQuNzk5NSAyMC4yOTY4LC0yNC45MjU3IHogbSAtMjg0Ljc4OSwwLjEyNSBjIDE0LjY0MzcsMCAyMSwxMS41NDAxIDIxLDI0LjY2MDEgMCwxMy4xMjUgLTYuMjMsMjUuMDA5OCAtMjEsMjUuMDA5OCAtMTQuNzcsMCAtMjEuMjcxNSwtMTEuODg0OCAtMjEuMjcxNSwtMjUuMDA5OCBsIDAuMDU5LDAgYyAwLC0xMy4xMiA2LjU2NDEsLTI0LjY2MDEgMjEuMjEyOSwtMjQuNjYwMSB6IgogICAgIHN0eWxlPSJmaWxsOiMyNTM4NTg7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlOm5vbmUiIC8+CiAgPHBhdGgKICAgICBpZD0icGF0aDgwMDUiCiAgICAgc3R5bGU9ImZpbGw6IzI2ODRmZjtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6bm9uZSIKICAgICBkPSJNIDExMy42NDc0NSw1Ni4xMzM4IDYyLjQ2OTk1LDQuOTU2MyA1Ny41MDk5NSwwIDEuMzc2MjUsNTYuMTMzOCBjIC0xLjgzNSwxLjg0IC0xLjgzNSw0LjgxODcgMCw2LjY1NSBsIDM1LjE5NjIsMzUuMTk1IDIwLjkzNzUsMjAuOTQyNSA1Ni4xMzc1LC01Ni4xMzc1IGMgMS44MzYzLC0xLjgzNjMgMS44MzYzLC00LjgxNSAwLC02LjY1NSB6IE0gNTcuNTA5OTUsNzcuMDQxMyAzOS45MzEyNSw1OS40NjM4IDU3LjUwOTk1LDQxLjg4IDc1LjA5MjQ1LDU5LjQ2MzggNTcuNTA5OTUsNzcuMDQxMyBaIiAvPgogIDxwYXRoCiAgICAgZD0iTSA1Ny41MDk5NSw0MS44OCBDIDQ2LjAwMTI1LDMwLjM2NjMgNDUuOTQyNDUsMTEuNzE4OCA1Ny4zODc0NSwwLjEzNzUgTCAxOC45MTEyNSwzOC41OTg4IDM5Ljg1Mzc1LDU5LjU0MTMgNTcuNTA5OTUsNDEuODggWiIKICAgICBzdHlsZT0iZmlsbDp1cmwoI2xpbmVhckdyYWRpZW50ODAwOSk7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlOm5vbmUiCiAgICAgaWQ9InBhdGg4MDE1IiAvPgogIDxwYXRoCiAgICAgZD0ibSA3NS4xNDEyNSw1OS40MTM4IC0xNy42MzEzLDE3LjYyNzUgYyA1LjU1NjMsNS41NTEyIDguNjgxMywxMy4wODYyIDguNjgxMywyMC45NDI1IDAsNy44NTYyIC0zLjEyNSwxNS4zODYyIC04LjY4MTMsMjAuOTQyNSBsIDM4LjU2ODgsLTM4LjU3IC0yMC45Mzc1LC0yMC45NDI1IHoiCiAgICAgc3R5bGU9ImZpbGw6dXJsKCNsaW5lYXJHcmFkaWVudDgwMTkpO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTpub25lIgogICAgIGlkPSJwYXRoODAyNSIgLz4KPC9zdmc+CjwhLS0gdmVyc2lvbjogMjAxNzEyMjMsIG9yaWdpbmFsIHNpemU6IDkxNi4yMjkzNyAxMTguOTI2MywgYm9yZGVyOiAzJSAtLT4K
    arguments:
      - name: jira_domain
        display_name: "JIRA Domain"
      - name: jira_user_email
        display_name: "JIRA API User Email"
        type: string
      - name: jira_api_key
        display_name: "JIRA API Key"
        type: string        
      - name: jira_project
        display_name: "Project"
        type: string        
      - name: jira_issue_type
        display_name: "Issue Type"
        type: string
        default: "Task"
      - name: jira_assignee
        display_name: "Assignee"
        type: string
        default: default
      - name: jira_summary
        display_name: "Summary Template"
        type: string
      - name: jira_description
        display_name: "Description Template"
        type: string
    mode: Merge
    validation: |
      return true;
    template:
      - call_url:
          url: "https://{{jira_domain}}.atlassian.net/rest/api/2/issue"
          method: POST
          request:
            header_rules:
              - inject:
                  content: "application/json"
                  mode: OverwriteOrInsertContent
                name: Content-Type
              - inject:
                  template: "Basic {{ '{{jira_user_email}}:{{jira_api_key}}' | b64encode }}"
                  mode: OverwriteOrInsertContent
                name: Authorization
            body_rule:
              inject:
                template: '{ "fields": { "project": { "key": "{{jira_project}}" }, "summary": "{{jira_summary}}", "description": "{{jira_description}}", "issuetype": { "name": "{{jira_issue_type}}" }, "assignee" : "jira_assignee" } }'
                mode: OverwriteOrInsertContent
          response:
            body_rule:
              jsonpath:
                - extract_to_attribute: integrations.jira.issue.id
                  name: $['id']
                - extract_to_attribute: integrations.jira.issue.key
                  name: $['key']
                - extract_to_attribute: integrations.jira.issue.link
                  name: $['self']
              